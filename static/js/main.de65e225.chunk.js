(this.webpackJsonpcaptainsreact=this.webpackJsonpcaptainsreact||[]).push([[0],{124:function(e,a,t){e.exports=t(139)},129:function(e,a,t){},139:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(12),i=t.n(l);t(129),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=t(106),c=t(167),m=Object(o.a)({status:{danger:"red"}}),s=function(e){return r.a.createElement(c.a,{theme:m},e.children)},u=t(107),p=t(58),d=t(41),g=t(23),E=t(18),h=t(16),b=t(32),f=t(185),v=t(177),w=t(173),j=t(183),O=t(175),y=t(184),x=t(170),k=t(174),C=t(182),N=t(71),S=t.n(N),I=t(109),$=t(171),D=t(172),P=function(){return r.a.createElement(I.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(x.a,{color:"inherit",href:"https://material-ui.com/"},"Captain's Log")," ",(new Date).getFullYear(),".")},L=t(31),M=t.n(L),T=t(30),B=r.a.createContext(),W={id:"",name:"",token:""},R=function(e,a){switch(a.type){case"reset":return W;case"login":case"signup":case"logout":return Object(E.a)(Object(E.a)({},e),a.payload);default:return e}};function q(e){var a=r.a.useReducer(R,W),t=Object(h.a)(a,2),n={state:t[0],dispatch:t[1]};return r.a.createElement(B.Provider,{value:n},e.children)}B.Consumer;function A(){var e=Object(b.a)(["\n  mutation signUp ($name: String, $email: String, $password: String) {\n    signUp(name: $name, email: $email, password: $password) {\n      token\n    }\n  }\n"]);return A=function(){return e},e}var z=Object($.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),U=M()(A());function F(){var e=z(),a=Object(d.g)(),t=Object(n.useState)({name:"",email:"",password:""}),l=Object(h.a)(t,2),i=l[0],o=l[1],c=Object(n.useContext)(B),m=(c.state,c.dispatch),s=Object(T.a)(U,{variables:i,onCompleted:function(e){m("signup",e),a.push("/"),sessionStorage.setItem("token",e.singUp.token)}}),u=Object(h.a)(s,2),p=u[0],b=(u[1].data,function(e){return function(a){o(Object(E.a)(Object(E.a)({},i),{},Object(g.a)({},e,a.target.value)))}});return r.a.createElement(D.a,{component:"main",maxWidth:"xs"},r.a.createElement(w.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(f.a,{className:e.avatar},r.a.createElement(S.a,null)),r.a.createElement(I.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:e.form,noValidate:!0},r.a.createElement(k.a,{container:!0,spacing:2},r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(j.a,{autoComplete:"name",name:"name",variant:"outlined",required:!0,fullWidth:!0,id:"name",label:"Name",value:i.name,onChange:b("name"),autoFocus:!0})),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(j.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",autoComplete:"email",value:i.email,onChange:b("email")})),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(j.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:i.password,onChange:b("password")})),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(O.a,{control:r.a.createElement(y.a,{value:"allowExtraEmails",color:"primary"}),label:"I want to receive inspiration, marketing promotions and updates via email."}))),r.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){e.preventDefault(),p()}},"Sign Up"),r.a.createElement(k.a,{container:!0,justify:"flex-end"},r.a.createElement(k.a,{item:!0},r.a.createElement(x.a,{href:"/login",variant:"body2"},"Already have an account? Sign in"))))),r.a.createElement(C.a,{mt:5},r.a.createElement(P,null)))}var G=t(142),Y=t(178);function _(){var e=Object(b.a)(["\n  mutation signIn ($email: String, $password: String) {\n    signIn(email: $email, password: $password ) {\n      token\n    }\n  }"]);return _=function(){return e},e}var H=Object($.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"dark"===e.palette.type?e.palette.grey[900]:e.palette.grey[50],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Q=M()(_());function J(){var e=H(),a=Object(d.g)(),t=Object(n.useContext)(B),l=(t.state,t.dispatch),i=Object(n.useState)({email:"",password:""}),o=Object(h.a)(i,2),c=o[0],m=o[1],s=Object(T.a)(Q,{variables:c,onCompleted:function(e){l("login",e),sessionStorage.setItem("token",e.signIn.token),a.push("/")}}),u=Object(h.a)(s,2),p=u[0],b=u[1],N=(b.data,b.loading),$=b.error,D=function(e){return function(a){m(Object(E.a)(Object(E.a)({},c),{},Object(g.a)({},e,a.target.value)))}};return r.a.createElement(k.a,{container:!0,component:"main",className:e.root},r.a.createElement(w.a,null),r.a.createElement(k.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),r.a.createElement(k.a,{item:!0,xs:12,sm:8,md:5,component:G.a,elevation:6,square:!0},r.a.createElement("div",{className:e.paper},r.a.createElement(f.a,{className:e.avatar},r.a.createElement(S.a,null)),r.a.createElement(I.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:e.form,noValidate:!0},r.a.createElement(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:c.email,onChange:D("email")}),r.a.createElement(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,error:$,helperText:$?$.message.replace("GraphQL error: ",""):null,name:"password",label:"Password",type:"password",id:"password",value:c.password,autoComplete:"current-password",onChange:D("password")}),r.a.createElement(O.a,{control:r.a.createElement(y.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){e.preventDefault(),p()}},"Sign In  ",N&&r.a.createElement(Y.a,null)),r.a.createElement(k.a,{container:!0},r.a.createElement(k.a,{item:!0,xs:!0},r.a.createElement(x.a,{href:"/forgot",variant:"body2"},"Forgot password?")),r.a.createElement(k.a,{item:!0},r.a.createElement(x.a,{href:"/signUp",variant:"body2"},"Don't have an account? Sign Up"))),r.a.createElement(C.a,{mt:5},r.a.createElement(P,null))))))}var V=t(75),K=t(102),X=t.n(K),Z=t(176),ee=t(105),ae=t(187),te=t(74),ne=t.n(te);function re(){var e=Object(b.a)(["\n  mutation deletePost($id: ID) {\n    deletePost(id: $id ) \n  }\n"]);return re=function(){return e},e}var le=["Edit","Delete"],ie=M()(re());function oe(e){var a=e.id,t=r.a.useState(null),n=Object(h.a)(t,2),l=n[0],i=n[1],o=Boolean(l),c=Object(T.a)(ie,{variables:{id:a},refetchQueries:[{query:ue}],onCompleted:function(){}}),m=Object(h.a)(c,2),s=m[0],u=m[1],p=u.loading,d=u.error,g=function(e){i(null),"Delete"===e&&(console.log("option",e),s())};return r.a.createElement("div",null,r.a.createElement(Z.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)}},r.a.createElement(ne.a,null)),r.a.createElement(ee.a,{id:"long-menu",anchorEl:l,keepMounted:!0,open:o,onClose:g,PaperProps:{style:{maxHeight:216,width:200}}},p&&"Loadign",d&&"Error",le.map((function(e){return r.a.createElement(ae.a,{key:e,selected:"Pyxis"===e,onClick:function(){return g(e)}},e)}))))}var ce=Object($.a)((function(e){return{main:{width:"100%",padding:e.spacing(3)},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main,height:"3vh",width:"3vh"},wrap:{display:"flex",flexDirection:"column"},header:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},gridItem:{flexGrow:0},bottomLine:{justifyContent:"space-between",alignItems:"center",fontSize:14},textArea:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}})),me=function(e){var a=e.params,t=ce();return a?r.a.createElement(G.a,{xs:12,className:t.main,key:a._id},r.a.createElement(k.a,{item:!0,container:!0,spacing:2,className:t.wrap},r.a.createElement(k.a,{item:!0,className:t.header},r.a.createElement(k.a,{item:!0,className:t.gridItem},r.a.createElement(f.a,{className:t.avatar,src:"images/avatars/chatBot.png"})),r.a.createElement(k.a,{item:!0},r.a.createElement(I.a,{variant:"subtitle1"},r.a.createElement("p",null,a.title||"Post title"))),r.a.createElement(k.a,null,r.a.createElement(oe,{id:a._id}))),r.a.createElement(k.a,{container:!0,className:t.textArea},r.a.createElement(I.a,{variant:"body1"},a.text)),r.a.createElement(k.a,{container:!0,className:t.bottomLine},r.a.createElement(I.a,{variant:"caption",display:"block",gutterBottom:!0},r.a.createElement(X.a,{format:"HH:MM:SS D MMM YYYY",unix:!0},a.createdAt/1e3)),r.a.createElement(I.a,{variant:"caption",display:"block",gutterBottom:!0},a.tag||"Tag")))):r.a.createElement(G.a,{className:t.main})};function se(){var e=Object(b.a)(["\n    {\n      getAllPosts {\n        _id\n        text\n        title\n        tag\n        createdAt\n        userId\n        index\n      }\n    }"]);return se=function(){return e},e}var ue=Object(V.b)(se()),pe=Object($.a)((function(e){return{paper:{maxHeight:"70vh",height:"100%",display:"flex",overflow:"auto",flexDirection:"column",alignItems:"center",margin:e.spacing(1)}}}));function de(){var e=Object(T.b)(ue),a=e.loading,t=e.error,n=e.data,l=pe();return a?r.a.createElement("p",null,"Loading..."):t?r.a.createElement("p",null,"Error :("):r.a.createElement(C.a,{className:l.paper,xs:12},n.getAllPosts.map((function(e){return r.a.createElement(me,{params:e,key:e._id,className:l.post})})))}function ge(){var e=Object(b.a)(["\n  mutation addPost($text: String, $title: String, $tag: String) {\n    addPost(text: $text, title: $title, tag: $tag ) {\n      _id\n      text\n      tag\n      userId\n      createdAt\n      index\n    }\n  }\n"]);return ge=function(){return e},e}var Ee=M()(ge());function he(e){var a=e.text,t=e.title,n=e.tag,l=e.clearInput,i=Object(T.a)(Ee,{variables:{text:a,title:t,tag:n},refetchQueries:[{query:ue}],onCompleted:function(){l()}}),o=Object(h.a)(i,2),c=o[0],m=o[1],s=m.loading,u=m.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{type:"submit",variant:"contained",color:"primary",onClick:c,"data-testid":"post-button"},u?u.message.replace("GraphQL error: ",""):"submit"),s&&r.a.createElement(Y.a,null))}var be=Object($.a)((function(e){return{field:{display:"flex",flexDirection:"column",justifyContent:"space-between"},input:{flexGrow:1,marginRight:e.spacing(1)},paper:{margin:e.spacing(1),padding:e.spacing(1),position:"bottom"}}})),fe=function(){var e=be(),a=Object(n.useState)({text:"",title:"",tag:""}),t=Object(h.a)(a,2),l=t[0],i=t[1];Object(n.useEffect)((function(){}));var o=function(e){return function(a){i(Object(E.a)(Object(E.a)({},l),{},Object(g.a)({},e,a.target.value)))}};return r.a.createElement(G.a,{className:e.paper},r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},className:e.field},r.a.createElement(j.a,{id:"title-input",value:l.title,onChange:o("title"),className:e.input,placeholder:"Title"}),r.a.createElement(j.a,{multiline:!0,id:"text-input",value:l.text,onChange:o("text"),className:e.input,placeholder:"Text"}),r.a.createElement(j.a,{id:"tag-input",value:l.tag,onChange:o("tag"),className:e.input,placeholder:"Tags"}),r.a.createElement(he,{text:l.text,title:l.title,tag:l.tag,clearInput:function(){i(Object(E.a)(Object(E.a)({},l),{},{text:"",title:"",tag:""}))}})))},ve=t(14),we=t(180),je=t(181),Oe=t(186),ye=t(179),xe=t(103),ke=t.n(xe),Ce=t(104),Ne=t.n(Ce),Se=t(81),Ie=t.n(Se),$e=t(79),De=t.n($e),Pe=t(80),Le=t.n(Pe),Me=Object($.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(g.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(g.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(ve.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(ve.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(g.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),sectionDesktop:Object(g.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(g.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}}));function Te(){var e=Me(),a=r.a.useState(null),t=Object(h.a)(a,2),n=t[0],l=t[1],i=r.a.useState(null),o=Object(h.a)(i,2),c=o[0],m=o[1],s=Boolean(n),u=Boolean(c),p=Object(d.g)(),g=function(e){l(e.currentTarget)},E=function(){m(null)},b=function(){l(null),E()},f="primary-search-account-menu",v=r.a.createElement(ee.a,{anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},id:f,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:s,onClose:b},r.a.createElement(ae.a,{onClick:b},"Profile"),r.a.createElement(ae.a,{onClick:b},"My account"),r.a.createElement(ae.a,{onClick:function(){sessionStorage.removeItem("token"),p.push("/login")}},"Logout")),w=r.a.createElement(ee.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:u,onClose:E},r.a.createElement(ae.a,null,r.a.createElement(Z.a,{"aria-label":"show 4 new mails",color:"inherit"},r.a.createElement(ye.a,{badgeContent:4,color:"secondary"},r.a.createElement(De.a,null))),r.a.createElement("p",null,"Messages")),r.a.createElement(ae.a,null,r.a.createElement(Z.a,{"aria-label":"show 11 new notifications",color:"inherit"},r.a.createElement(ye.a,{badgeContent:11,color:"secondary"},r.a.createElement(Le.a,null))),r.a.createElement("p",null,"Notifications")),r.a.createElement(ae.a,{onClick:g},r.a.createElement(Z.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit"},r.a.createElement(Ie.a,null)),r.a.createElement("p",null,"Profile")));return r.a.createElement("div",{className:e.grow},r.a.createElement(we.a,{position:"static"},r.a.createElement(je.a,null,r.a.createElement(Z.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"open drawer"},r.a.createElement(ke.a,null)),r.a.createElement(I.a,{className:e.title,variant:"h6",noWrap:!0},"Capitain's Log"),r.a.createElement("div",{className:e.search},r.a.createElement("div",{className:e.searchIcon},r.a.createElement(Ne.a,null)),r.a.createElement(Oe.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}})),r.a.createElement("div",{className:e.grow}),r.a.createElement("div",{className:e.sectionDesktop},r.a.createElement(Z.a,{"aria-label":"show 4 new mails",color:"inherit"},r.a.createElement(ye.a,{badgeContent:0,color:"secondary"},r.a.createElement(De.a,null))),r.a.createElement(Z.a,{"aria-label":"show 17 new notifications",color:"inherit"},r.a.createElement(ye.a,{badgeContent:0,color:"secondary"},r.a.createElement(Le.a,null))),r.a.createElement(Z.a,{edge:"end","aria-label":"account of current user","aria-controls":f,"aria-haspopup":"true",onClick:g,color:"inherit"},r.a.createElement(Ie.a,null))),r.a.createElement("div",{className:e.sectionMobile},r.a.createElement(Z.a,{"aria-label":"show more","aria-controls":"primary-search-account-menu-mobile","aria-haspopup":"true",onClick:function(e){m(e.currentTarget)},color:"inherit"},r.a.createElement(ne.a,null))))),w,v)}var Be=function(){return r.a.createElement(D.a,null,r.a.createElement(Te,null),r.a.createElement(de,null),r.a.createElement(fe,null))};function We(){return r.a.createElement(p.a,{basename:"".concat("/CaptainLog","/")},r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/login"},r.a.createElement(J,null)),r.a.createElement(d.b,{path:"/signup"},r.a.createElement(F,null)),r.a.createElement(Re,{path:"/"},r.a.createElement(Be,null))))}function Re(e){var a=e.children,t=Object(u.a)(e,["children"]),n=sessionStorage.getItem("token");return r.a.createElement(d.b,Object.assign({},t,{render:function(e){var t=e.location;return n?a:r.a.createElement(d.a,{to:{pathname:"/login",state:{from:t}}})}}))}var qe=t(21),Ae=new V.a({uri:"https://captainlog.herokuapp.com",fetchOptions:{credentials:"include"},request:function(e){var a=sessionStorage.getItem("token");e.setContext({headers:{authorization:a||""}})}}),ze=function(){return r.a.createElement(qe.a,{client:Ae},r.a.createElement(w.a,null),r.a.createElement(q,null,r.a.createElement(s,null,r.a.createElement(We,null))))};i.a.render(r.a.createElement(ze,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[124,1,2]]]);
//# sourceMappingURL=main.de65e225.chunk.js.map